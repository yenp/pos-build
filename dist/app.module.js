"use strict";var __createBinding=this&&this.__createBinding||(Object.create?function(e,r,t,o){void 0===o&&(o=t);var s=Object.getOwnPropertyDescriptor(r,t);s&&("get"in s?r.__esModule:!s.writable&&!s.configurable)||(s={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,o,s)}:function(e,r,t,o){e[o=void 0===o?t:o]=r[t]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,r){Object.defineProperty(e,"default",{enumerable:!0,value:r})}:function(e,r){e.default=r}),__decorate=this&&this.__decorate||function(e,r,t,o){var s,u=arguments.length,i=u<3?r:null===o?o=Object.getOwnPropertyDescriptor(r,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,r,t,o);else for(var n=e.length-1;0<=n;n--)(s=e[n])&&(i=(u<3?s(i):3<u?s(r,t,i):s(r,t))||i);return 3<u&&i&&Object.defineProperty(r,t,i),i},__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)"default"!==t&&Object.prototype.hasOwnProperty.call(e,t)&&__createBinding(r,e,t);return __setModuleDefault(r,e),r};Object.defineProperty(exports,"__esModule",{value:!0}),exports.AppModule=void 0;const app_service_1=require("./app.service"),common_1=require("@nestjs/common"),typeorm_1=require("@nestjs/typeorm"),auth_module_1=require("./auth/auth.module"),app_controller_1=require("./app.controller"),user_module_1=require("./user/user.module"),core_1=require("@nestjs/core"),error_filter_1=require("./error.filter"),response_interceptor_1=require("./response.interceptor"),dotenv=__importStar(require("dotenv")),product_module_1=require("./product/product.module"),order_module_1=require("./order/order.module"),path_1=require("path"),stage=process.env.NODE_ENV||"development",envFilePath=".env."+stage,serve_static_1=(dotenv.config({path:envFilePath}),require("@nestjs/serve-static"));let AppModule=class{};exports.AppModule=AppModule,exports.AppModule=AppModule=__decorate([(0,common_1.Module)({imports:[serve_static_1.ServeStaticModule.forRoot({rootPath:(0,path_1.join)(__dirname,"..","build"),exclude:["/api/(.*)"]}),typeorm_1.TypeOrmModule.forRoot({type:"mysql",host:process.env.DATABASE_HOST,port:parseInt(process.env.DATABASE_PORT,10),username:process.env.DATABASE_USER,password:process.env.DATABASE_PASSWORD,database:process.env.DATABASE_NAME,entities:[__dirname+"/model/*.entity{.ts,.js}"],synchronize:!1}),auth_module_1.AuthModule,user_module_1.UserModule,product_module_1.ProductModule,order_module_1.OrderModule],controllers:[app_controller_1.AppController],providers:[app_service_1.AppService,{provide:core_1.APP_FILTER,useClass:error_filter_1.ErrorExceptionFilter},{provide:core_1.APP_INTERCEPTOR,useClass:response_interceptor_1.ResponseInterceptor}]})],AppModule);